# Менеджер агентов (Agent Manager)

## Описание
Менеджер агентов является центральным компонентом системы, отвечающим за координацию работы агентов и маршрутизацию запросов. Он анализирует сложность входящих запросов, выбирает оптимальный режим работы (одноагентный или мульти-агентный) и направляет запросы соответствующим агентам.

## Основные возможности
- **Анализ сложности запросов** - оценка сложности запросов для определения оптимального режима работы
- **Выбор режимов работы** - автоматическое переключение между одноагентным и мульти-агентным режимами
- **Маршрутизация запросов** - направление запросов оптимальным агентам на основе их релевантности
- **Управление жизненным циклом агентов** - регистрация, удаление и обновление агентов
- **Мониторинг производительности** - отслеживание эффективности обработки запросов различными агентами

## Структура компонента
```
agent_manager/
├── __init__.py                  # Файл инициализации пакета
├── agent_manager.py             # Основной класс менеджера агентов
├── agent_base.py                # Базовый абстрактный класс для всех агентов
├── general_agent.py             # Реализация универсального агента
├── examples/                    # Примеры использования
│   └── basic_usage.py           # Базовый пример использования менеджера агентов
└── README.md                    # Документация по компоненту
```

## Режимы работы

### Одноагентный режим (Single-Agent Mode)
В этом режиме запрос обрабатывается одним агентом, наиболее подходящим для данного типа запроса. Режим используется для простых и среднесложных запросов, не требующих декомпозиции на подзадачи.

### Мульти-агентный режим (Multi-Agent Mode)
В этом режиме сложный запрос декомпозируется на подзадачи, которые распределяются между несколькими специализированными агентами. Результаты работы агентов объединяются для формирования окончательного ответа. Режим используется для сложных запросов, требующих разнородной экспертизы.

## Пример использования

### Инициализация менеджера агентов
```python
from src.core.agent_manager.agent_manager import AgentManager
from src.core.agent_manager.general_agent import GeneralAgent

# Создаем менеджер агентов
agent_manager = AgentManager()

# Создаем и регистрируем агентов
general_agent = GeneralAgent()
agent_manager.register_agent(general_agent)
```

### Обработка запроса в одноагентном режиме
```python
# Простой запрос, который будет обработан в одноагентном режиме
query = "Привет, как дела?"
result = agent_manager.process_query(query)

print(f"Режим работы: {result.get('operation_mode')}")
print(f"Уровень сложности: {result.get('complexity_level')}")
print(f"Используемый агент: {result.get('agent_id')}")
print(f"Ответ: {result.get('result', {}).get('response')}")
```

### Обработка запроса в мульти-агентном режиме
```python
# Сложный запрос, который будет обработан в мульти-агентном режиме
complex_query = "Сравни различные архитектуры нейронных сетей для обработки естественного языка, объясни их преимущества и недостатки, и приведи примеры практического применения каждой из них."
result = agent_manager.process_query(complex_query)

print(f"Режим работы: {result.get('operation_mode')}")
print(f"Уровень сложности: {result.get('complexity_level')}")
print(f"Ответ: {result.get('result', {}).get('response')}")
```

## Создание специализированных агентов

Для создания собственного агента необходимо наследоваться от класса `AgentBase` и реализовать абстрактные методы:

```python
from src.core.agent_manager.agent_base import AgentBase

class SpecializedAgent(AgentBase):
    def __init__(self):
        super().__init__(
            agent_id="specialized",
            name="Специализированный агент",
            description="Описание специализированного агента",
            keywords=["ключевое_слово1", "ключевое_слово2"],
            capabilities=["возможность1", "возможность2"]
        )
    
    def process_query(self, query, context=None):
        # Логика обработки запроса
        return {"response": "Ответ от специализированного агента"}
    
    def calculate_relevance(self, query):
        # Логика расчета релевантности
        return 0.7  # Оценка от 0.0 до 1.0
```

## Планы по развитию
- **Улучшение алгоритма анализа сложности** - внедрение более сложных алгоритмов для точной оценки сложности запросов
- **Интеграция механизмов обучения** - добавление возможности обучения на основе обратной связи для улучшения маршрутизации
- **Расширение мульти-агентного режима** - создание более продвинутых механизмов декомпозиции запросов и объединения результатов
- **Добавление специализированных агентов** - разработка агентов для конкретных доменных областей 